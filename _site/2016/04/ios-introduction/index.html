<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>iOS 初体验</title>
  <meta name="description" content="客户端对做后端的我来说，一直是黑盒子般。自从换了Mac，就寻思着什么时候学习学习iOS开发。这几个月断断续续花了时间，先是看了Stanford的cs193p课程，后来又读了&lt;iOS Programming The Big Nerd Ranch Guide&gt;,最后写了个非常简单的App：ToDo。今天这...">
  <meta name="author" content="Wei Wang">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="iOS 初体验">
  <meta name="twitter:description" content="客户端对做后端的我来说，一直是黑盒子般。自从换了Mac，就寻思着什么时候学习学习iOS开发。这几个月断断续续花了时间，先是看了Stanford的cs193p课程，后来又读了&lt;iOS Programming The Big Nerd Ranch Guide&gt;,最后写了个非常简单的App：ToDo。今天这...">
  
  <meta property="og:type" content="article">
  <meta property="og:title" content="iOS 初体验">
  <meta property="og:description" content="客户端对做后端的我来说，一直是黑盒子般。自从换了Mac，就寻思着什么时候学习学习iOS开发。这几个月断断续续花了时间，先是看了Stanford的cs193p课程，后来又读了&lt;iOS Programming The Big Nerd Ranch Guide&gt;,最后写了个非常简单的App：ToDo。今天这...">
  
  <link rel="icon" type="image/png" href="/assets/images/favicon.png" />
  <link href="/assets/images/favicon.png" rel="shortcut icon" type="image/png">
  
  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://masutangu.com/2016/04/ios-introduction/">
  <link rel="alternate" type="application/rss+xml" title="Masutangu" href="http://masutangu.com/feed.xml">
  
  <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />
  
</head>


  <body>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    
    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/assets/images/background-cover.jpg')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/#blog" title="前往 Masutangu 的主页" class="blog-button"><img src="/assets/images/avatar.jpg" width="80" alt="Masutangu logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for Masutangu" class="blog-button">Masutangu</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">长风破浪会有时 直挂云帆济沧海</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">也許我這一生　始終在追逐那顆九號球</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        
        
        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="Visit blog" class="blog-button">博客</a></li>
                
                  <li class="navigation__item"><a href="http://500px.me/community/user-details/5cc3fb7c1480fb4fc2140a09627457614" target="_blank" title="Life">生活</a></li>
                
                  <li class="navigation__item"><a href="https://about.me/masutangu" target="_blank" title="About me">关于</a></li>
                
              </ul>
            </nav>
          </div>
          
          <div><nav class="cover-navigation navigation--social">
  <ul class="navigation">

  

  
  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/masutangu" title="@masutangu 的 Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>
  
  
  

  

  <!-- RSS -->
  <li class="navigation__item">
    <a href="/feed.xml" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>

  
  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:masutangu.cs@gmail.com" title="Contact me">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>
  

  </ul>
</nav>
</div>
        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-blue"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2016-04-28 23:10:00 +0800" itemprop="datePublished" class="post-meta__date date">2016-04-28</time> &#8226; <span class="post-meta__tags tags">iOS</span>
    </div>
    <h1 class="post-title">iOS 初体验</h1>
  </header>

  <section class="post">
    <p>客户端对做后端的我来说，一直是黑盒子般。自从换了Mac，就寻思着什么时候学习学习iOS开发。这几个月断断续续花了时间，先是看了Stanford的cs193p课程，后来又读了&lt;iOS Programming The Big Nerd Ranch Guide&gt;,最后写了个非常简单的App：<a href="https://github.com/Masutangu/ToDo">ToDo</a>。今天这里分享下iOS一些学习笔记，素材取自cs193p的ppt，apple的开发者文档。鉴于我现在iOS水平有限，写得比较浅，大家请见谅。</p>

<h1>What’s in iOS?</h1>

<p><img src="/assets/images/ios-introduction/illustration-1.png" alt="iOS架构图" title="iOS架构图" width="800" /></p>

<p>iOS处于底层硬件和app的中间。iOS的整体架构可以划分为四层：Core OS, Core Services, Media, Cocoa Touch</p>

<ul>
<li><p>Core OS: Contains the low-level features that most other technologies are built upon. Include：OSX Kernel, Mach 3.0, BSD, Sockets, Security, Power Management, Keychain Access, Certificates, File System, Bonjour</p></li>
<li><p>Core Services: Contains fundamental system services for apps. This layer also contains individual technologies to support features such as location, iCloud, social media, and networking. Include：Collections, Address Book, Networking, File Access, SQLite, Core Location, Net Services, Threading, Preferences, URL Utilities. 我理解是在Core OS基础上封装了一层接口。</p></li>
<li><p>Media: Contains the graphics, audio, and video technologies you use to implement multimedia experiences in your apps. Include：Core Audio，OpenAL, Audio Mixing, Audio Recording, Video Playback, OpenGL ES, Core Animation.</p></li>
<li><p>Cocoa Touch: Contains key frameworks for building iOS apps. These frameworks define the appearance of your app. They also provide the basic app infrastructure and support for key technologies such as multitasking, touch-based input, push notifications, and many high-level system services. Include: Multi-Touch, Core Motion, View Hierarchy, Localization, Controls, Alerts, Web View, Map Kit, Image Picker, Camera.</p></li>
</ul>

<h1>MVC</h1>

<p><img src="/assets/images/ios-introduction/illustration-2.png" alt="MVC" title="MVC" width="800" /></p>

<ul>
<li><strong>Model</strong>: What your application is (but not how it is displayed)</li>
<li><strong>Controller</strong>: How your Model is presented to the user (UI logic)</li>
<li><strong>View</strong>:  Your Controller’s minions<br></li>
</ul>

<p>应用程序的逻辑应该放在Model而不是Controller，因为<strong>Model = What your application is</strong>。</p>

<h2>MVC之间的关系</h2>

<p><img src="/assets/images/ios-introduction/illustration-3.png" alt="MVC关系" title="MVC关系" width="800" /></p>

<ul>
<li>Controller可以直接访问Model和View（outlet）</li>
<li>Model和View是完全隔离开的</li>
<li>View通过protocol的方式（blind and structured）访问Controller，包括：<strong>target-action</strong>方式，<strong>delegate</strong>方式和<strong>data source</strong>方式。</li>
<li>Model通过<strong>notification&amp;KVO（Key Value Observing）</strong>将变化通知给Controller</li>
</ul>

<h2>多个MVC的组织</h2>

<p><img src="/assets/images/ios-introduction/illustration-4.png" alt="错误方式组织多个MVC" title="错误方式组织多个MVC" width="800" /></p>

<p><em>错误的做法：不同模块的communication非常杂乱，难以维护。</em>
<img src="/assets/images/ios-introduction/illustration-5.png" alt="正确方式组织多个MVC" title="正确方式组织多个MVC" width="800" /></p>

<p><em>正确的做法：Using MVC as part of the view of another MVC。划分好模块，不同模块间的communication非常少。</em></p>

<h1>Objective-C</h1>

<p>面向对象编程的三个原则是：<strong>基于消息传递机制</strong>，<strong>对象分离</strong>和<strong>多态</strong></p>

<ul>
<li><p><strong>Category</strong>
给已存在的类新增新的方法。
<pre><code>
//NSObject+HelloWorld.h
@interface NSObject (HelloWorld)<br>
-(void)HelloWorld;<br>
@end<br>
//NSObject+HelloWorld.m
#import &quot;NSObject+HelloWorld.h&quot;<br>
@implementation NSObject (HelloWorld)<br>
-(void)HelloWorld{<br>
    NSLog(@&quot;Hello World!&quot;);<br>
}<br>
@end<br>
</code></pre></p>

<ul>
<li><strong>Category vs Inheritance</strong>:
Category用于给一个类新增一个功能，Inheritance用于修改父类的功能。</li>
<li><strong>Category vs Extension</strong>:
Extension一般用来隐藏类的私有信息，需要有类的源码才能添加Extension。另外Extension可以添加成员变量，而Category不允许。</li>
</ul></li>
<li><p><strong>动态绑定</strong></p>

<ul>
<li><strong>Introspection</strong>: Asking at runtime what class an object is or what messages can be sent to it. 
<pre><code>
<strong>isKindOfClass</strong>: returns whether an object is that kind of class (inheritance included) 
<strong>isMemberOfClass</strong>: returns whether an object is that kind of class (no inheritance) 
<strong>respondsToSelector</strong>: returns whether an object responds to a given method
</code></pre></li>
<li><strong>Protocols</strong>: A syntax that is “in between” id and static typing. Does not specify the class of an object pointed to, but does specify what methods it implements.
<pre><code>
//definition file
@protocol Foo
-(void)someMethod;
-(void)methodWithArgument:(BOOL)argument;
@property (readonly) int readonlyProperty; // getter (only) is part of this protocol
@property NSString <em>readwriteProperty; // getter and setter are both in the protocol 
-(int)methodThatReturnsSomething;
@end
//example file
id <Foo> obj = [[MyClass alloc] init];
</code></pre>
Protocols在iOS中的应用包括</em><em>delegates</em>* 和 <strong>dataSources</strong></li>
</ul></li>
</ul>

<h1>设计模式</h1>

<ul>
<li><strong>Target-Action</strong>:</li>
</ul>

<blockquote>
<p>Cocoa uses the <strong>target-action</strong> mechanism for communication between a <strong>control</strong> and another object.  The receiving object—typically an instance of a custom class—is called the <strong>target</strong>. The <strong>action</strong> is the message that the control sends to the target.   </p>
</blockquote>

<ul>
<li><strong>Delegation</strong>:</li>
</ul>

<blockquote>
<p><strong>Delegation</strong> is a simple and powerful pattern in which one object in a program acts on behalf of, or in coordination with, another object. The delegating object keeps a reference to the other object—the delegate—and at the appropriate time sends a message to it.</p>
</blockquote>

<ul>
<li><strong>Date Source</strong>:</li>
</ul>

<blockquote>
<p><strong>A data source</strong> is almost identical to a <strong>delegate</strong>. The difference is in the relationship with the delegating object. Instead of being delegated control of the user interface, a data source is <strong>delegated control of data</strong>. The delegating object, typically a view object such as a table view, holds a reference to its data source and occasionally asks it for the data it should display.</p>
</blockquote>

<ul>
<li><strong>KVO</strong></li>
</ul>

<blockquote>
<p><strong>Key-value observing</strong> is a mechanism that enables an object to be notified directly when a property of another object changes.</p>
</blockquote>

<h1>内存管理</h1>

<p>iOS使用<strong>Automatic Reference Counting</strong>来做内存管理。ARC在编译期会分析代码，确定对象的生命周期，在相应的位置自动加上retain和release。</p>

  </section>
</article>

<section class="read-more">
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">最近的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/2016/05/read-tcpcopy-source-code/" title="link to Tcpcopy 源码阅读">Tcpcopy 源码阅读</a></h2>
       <p class="excerpt">tcpcopy是网易开源的一款压测工具，可以实时复制线上流量到测试环境，从而利用线上真实的用户流量来对测试环境进行仿真压测。由于网上关于tcpcopy的介绍并不多，我对tcpcopy的原理也很感兴趣。因此在学习其源码后写下这篇文章和大家分享。这里非常感谢tcpcopy的作者王斌老师的热心指导。架构第一种架构：实现原理：从数据链路层捕获客户端的请求包，修改目的IP地址为压测机器，再从IP层发送出去。从数据链路层捕获压测机器的响应包，保持tcp会话的状态（seq number，ack numb...&hellip;</p>
       <div class="post-list__meta"><time datetime="2016-05-05 10:00:25 +0800" class="post-list__meta--date date">2016-05-05</time> &#8226; <span class="post-list__meta--tags tags">源码阅读</span><a class="btn-border-small" href=/2016/05/read-tcpcopy-source-code/>继续阅读</a></div>
   </div>
   
   
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">更早的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/2016/04/python-pickling-error/" title="link to Python 进程池的坑：Pickling Error!">Python 进程池的坑：Pickling Error!</a></h2>
       <p class="excerpt">前阵子在跑Elric下的爬虫任务时，发现了worker进程有偶现的异常挂起的现象，通过strace看到worker进程block在futex(…, FUTEX_WAIT,…)这里，查看了worker的标准输出，发现打印了这么一行东西：File “../multiprocessing/queues.py”, line 266, in _feed send(obj) PickingError: can’t pickle &lt;type ‘thread.lock’&gt;: attribute...&hellip;</p>
       <div class="post-list__meta"><time datetime="2016-04-15 16:07:58 +0800" class="post-list__meta--date date">2016-04-15</time> &#8226; <span class="post-list__meta--tags tags">编程语言</span><a class="btn-border-small" href=/2016/04/python-pickling-error/>继续阅读</a></div>
   </div>
   
</section>

<section class="post-comments">
  
    <div id="disqus_thread"></div>
    <script>
    
    var disqus_config = function () {
        this.page.url = "http://masutangu.com/2016/04/ios-introduction/";
        this.page.identifier = "/2016/04/ios-introduction/";
    };

    var disqus_shortname = 'masutangu';
    
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>要查看<a href="http://disqus.com/?ref_noscript"> Disqus </a>评论，请启用 JavaScript</noscript>
    
  
  
  
  
</section>


            <section class="footer">
    <footer>
    	<span class="footer__copyright">本站点采用<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享 署名-非商业性使用-相同方式共享 4.0 国际 许可协议</a></span>
        <span class="footer__copyright">由 <a href="https://jekyllrb.com">Jekyll</a> 于 2016-12-28 生成，感谢 <a href="https://www.digitalocean.com/?refcode=30ed2d146762">Digital Ocean</a> 为本站提供稳定的 VPS 服务</span>
        <span class="footer__copyright">本站由 <a href="http://onev.cat">@onevcat</a> 创建，采用 <a href="https://github.com/onevcat/vno-jekyll">Vno - Jekyll</a> 作为主题，您可以在 GitHub 找到<a href="https://github.com/onevcat/OneV-s-Den">本站源码</a> - &copy; 2016</span>
    </footer>
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>

<script type="text/javascript" src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript" src="/js/main.js"></script>


<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-77236140-1', 'masutangu.com');
    ga('send', 'pageview');
</script>


    
  </body>

</html>
